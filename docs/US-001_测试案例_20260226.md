# US-001 测试案例文档

**文档创建时间**: 2026-02-26  
**测试状态**: ✅ 通过

---

## 测试概述

本文档记录US-001（提示词分割功能）的测试用例和测试结果。

---

## 测试环境

- **平台**: Windows
- **框架**: Tauri 2.x + React
- **后端**: Rust
- **测试工具**: Rust Unit Test (cargo test)

---

## 测试用例

### TC-001: 中文提示词解析

| 项目         | 内容                                                                                              |
| ------------ | ------------------------------------------------------------------------------------------------- |
| **用例ID**   | TC-001                                                                                            |
| **用例名称** | 中文提示词解析                                                                                    |
| **前置条件** | 系统正常运行                                                                                      |
| **输入**     | `在阳光明媚的森林里@小明 正在愉快地跑步`                                                          |
| **预期输出** | 提取角色"小明"，分割出场景和动作                                                                  |
| **测试步骤** | 1. 调用 `parse_prompt` 函数<br>2. 验证返回结果                                                    |
| **验证点**   | - `characters.len() == 1`<br>- `characters[0].name == "小明"`<br>- `segments.is_empty() == false` |
| **测试结果** | ✅ 通过                                                                                           |

---

### TC-002: 英文提示词解析

| 项目         | 内容                                           |
| ------------ | ---------------------------------------------- |
| **用例ID**   | TC-002                                         |
| **用例名称** | 英文提示词解析                                 |
| **前置条件** | 系统正常运行                                   |
| **输入**     | `A beautiful sunset at the beach`              |
| **预期输出** | 识别场景类型                                   |
| **测试步骤** | 1. 调用 `parse_prompt` 函数<br>2. 验证返回结果 |
| **验证点**   | `segments.is_empty() == false`                 |
| **测试结果** | ✅ 通过                                        |

---

### TC-003: 多段分割

| 项目         | 内容                                                 |
| ------------ | ---------------------------------------------------- |
| **用例ID**   | TC-003                                               |
| **用例名称** | 多段分割测试                                         |
| **前置条件** | 系统正常运行                                         |
| **输入**     | `在森林里@小明 正在跑步，海边很美`                   |
| **预期输出** | 分割成多个段落                                       |
| **测试步骤** | 1. 调用 `parse_prompt` 函数<br>2. 验证分段数量       |
| **验证点**   | - `characters.len() == 1`<br>- `segments.len() >= 2` |
| **测试结果** | ✅ 通过                                              |

---

### TC-004: 时间/天气/风格识别

| 项目         | 内容                                           |
| ------------ | ---------------------------------------------- |
| **用例ID**   | TC-004                                         |
| **用例名称** | 时间/天气/风格识别                             |
| **前置条件** | 系统正常运行                                   |
| **输入**     | `清晨的湖边@英雄 站在礁石上，晴天，动漫风格`   |
| **预期输出** | 识别时间、天气、风格关键词                     |
| **测试步骤** | 1. 调用 `parse_prompt` 函数<br>2. 验证类型识别 |
| **验证点**   | 类型包含 "time" 或 "scene"                     |
| **测试结果** | ✅ 通过                                        |

---

## 测试用例矩阵

| 用例ID | 用例名称           | 功能点   | 优先级 | 结果    |
| ------ | ------------------ | -------- | ------ | ------- |
| TC-001 | 中文提示词解析     | 角色提取 | P0     | ✅ 通过 |
| TC-002 | 英文提示词解析     | 场景识别 | P0     | ✅ 通过 |
| TC-003 | 多段分割           | 文本分割 | P0     | ✅ 通过 |
| TC-004 | 时间/天气/风格识别 | 类型识别 | P0     | ✅ 通过 |

---

## 扩展测试用例（待执行）

### TC-005: 空输入处理

- **输入**: `""`
- **预期**: 返回错误 "Prompt cannot be empty"
- **状态**: 待测试

### TC-006: 仅角色引用

- **输入**: `@张三 @李四`
- **预期**: 提取两个角色，无分段
- **状态**: 待测试

### TC-007: 复杂多角色场景

- **输入**: `在阳光海滩，@男孩 和@女孩 正在玩耍，晴天，动漫风格`
- **预期**: 提取2个角色，分割多个段落
- **状态**: 待测试

---

## 测试结论

**测试结果**: 4/4 通过 ✅

所有核心功能测试用例均已通过，US-001提示词分割功能满足验收标准。

---

## 后续建议

1. 增加更多边界情况测试
2. 添加性能测试（大文本解析）
3. 集成测试（前端UI交互）
