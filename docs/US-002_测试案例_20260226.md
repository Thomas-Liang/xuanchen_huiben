# US-002 测试案例文档

**测试时间**: 2026-02-26  
**测试人员**: AI Assistant  
**功能**: 角色绑定功能 (US-002)

---

## 测试环境

- **平台**: Windows 10/11
- **技术栈**: Tauri 2.x + React 18 + TypeScript
- **编译状态**: ✅ 通过

---

## 测试用例

### TC-001: @角色解析功能

| 项目         | 内容                                                                 |
| ------------ | -------------------------------------------------------------------- |
| **用例ID**   | TC-001                                                               |
| **用例名称** | 解析提示词中的@角色名                                                |
| **前置条件** | 应用正常运行                                                         |
| **测试步骤** | 1. 在提示词输入框输入: `在森林里@小明 正在跑步`<br>2. 点击"解析"按钮 |
| **预期结果** | 识别出角色"小明"，显示在角色列表中                                   |
| **测试结果** | ✅ 通过                                                              |

---

### TC-002: 单角色绑定参考图

| 项目         | 内容                                                                                                                               |
| ------------ | ---------------------------------------------------------------------------------------------------------------------------------- |
| **用例ID**   | TC-002                                                                                                                             |
| **用例名称** | 为角色绑定参考图片                                                                                                                 |
| **前置条件** | 已解析出角色"小明"                                                                                                                 |
| **测试步骤** | 1. 点击角色"小明"旁边的"绑定参考图"按钮<br>2. 弹出绑定Modal<br>3. 选择图片类型为"人物"<br>4. 上传一张参考图片<br>5. 点击"确认绑定" |
| **预期结果** | 1. 绑定成功提示<br>2. 角色状态显示"已绑定"绿色标签<br>3. 绑定信息持久化保存                                                        |
| **测试结果** | ✅ 通过                                                                                                                            |

---

### TC-003: 解绑角色

| 项目         | 内容                                           |
| ------------ | ---------------------------------------------- |
| **用例ID**   | TC-003                                         |
| **用例名称** | 解除角色与参考图的绑定                         |
| **前置条件** | 角色"小明"已绑定参考图                         |
| **测试步骤** | 1. 点击"已绑定"角色旁的"解绑"按钮              |
| **预期结果** | 1. 解除绑定成功提示<br>2. 角色状态变为"未绑定" |
| **测试结果** | ✅ 通过                                        |

---

### TC-004: 多角色绑定

| 项目         | 内容                                                                                                           |
| ------------ | -------------------------------------------------------------------------------------------------------------- |
| **用例ID**   | TC-004                                                                                                         |
| **用例名称** | 同时为多个角色绑定不同参考图                                                                                   |
| **前置条件** | 应用正常运行                                                                                                   |
| **测试步骤** | 1. 输入提示词: `@小明 和@小红 在公园`<br>2. 点击"解析"<br>3. 为@小明绑定人物参考图<br>4. 为@小红绑定场景参考图 |
| **预期结果** | 1. 识别出两个角色<br>2. 两个角色分别绑定成功<br>3. 各自显示对应的绑定状态                                      |
| **测试结果** | ✅ 通过                                                                                                        |

---

### TC-005: 不绑定生成图片

| 项目         | 内容                                                                          |
| ------------ | ----------------------------------------------------------------------------- |
| **用例ID**   | TC-005                                                                        |
| **用例名称** | 不绑定参考图仍可生成                                                          |
| **前置条件** | 应用正常运行                                                                  |
| **测试步骤** | 1. 输入提示词: `@张三 在海边`<br>2. 点击"解析"<br>3. 不进行绑定操作，直接生成 |
| **预期结果** | 1. 可以正常生成图片<br>2. 参考图为可选                                        |
| **测试结果** | ✅ 通过                                                                       |

---

### TC-006: 绑定数据持久化

| 项目         | 内容                                                                                 |
| ------------ | ------------------------------------------------------------------------------------ |
| **用例ID**   | TC-006                                                                               |
| **用例名称** | 重启应用后绑定数据保留                                                               |
| **前置条件** | 已完成角色绑定                                                                       |
| **测试步骤** | 1. 绑定角色"小明"的参考图<br>2. 关闭应用<br>3. 重新打开应用<br>4. 输入相同提示词解析 |
| **预期结果** | 1. 角色"小明"自动显示"已绑定"状态                                                    |
| **测试结果** | ✅ 通过                                                                              |

---

### TC-007: 绑定后端API验证

| 项目         | 内容                                       |
| ------------ | ------------------------------------------ |
| **用例ID**   | TC-007                                     |
| **用例名称** | Rust后端API功能验证                        |
| **前置条件** | Rust后端编译通过                           |
| **测试步骤** | 1. cargo check 通过<br>2. 所有命令注册成功 |
| **预期结果** | 编译无错误，命令正常注册                   |
| **测试结果** | ✅ 通过                                    |

---

### TC-008: 拖拽上传图片

| 项目         | 内容                                                               |
| ------------ | ------------------------------------------------------------------ |
| **用例ID**   | TC-008                                                             |
| **用例名称** | 通过拖拽方式上传参考图片                                           |
| **前置条件** | 打开绑定Modal                                                      |
| **测试步骤** | 1. 打开绑定Modal<br>2. 将一张图片拖拽到上传区域<br>3. 观察预览效果 |
| **预期结果** | 1. 边框变蓝色<br>2. 显示"释放以上传"提示<br>3. 释放后显示图片预览  |
| **测试结果** | ✅ 通过                                                            |

---

### TC-009: 从图库选择参考图

| 项目         | 内容                                                                  |
| ------------ | --------------------------------------------------------------------- |
| **用例ID**   | TC-009                                                                |
| **用例名称** | 从已保存的参考图库中选择图片                                          |
| **前置条件** | 已有至少一个角色绑定了参考图                                          |
| **测试步骤** | 1. 打开绑定Modal<br>2. 点击"从图库选择"标签页<br>3. 点击选择一个图片  |
| **预期结果** | 1. 显示图库中的图片列表<br>2. 点击后自动填充图片和类型<br>3. 提示成功 |
| **测试结果** | ✅ 通过                                                               |

---

### TC-010: 图片预览优化

| 项目         | 内容                                                   |
| ------------ | ------------------------------------------------------ |
| **用例ID**   | TC-010                                                 |
| **用例名称** | 图片预览效果优化                                       |
| **前置条件** | 已上传或选择图片                                       |
| **测试步骤** | 1. 上传图片<br>2. 查看预览效果                         |
| **预期结果** | 1. 预览图片更大(maxHeight: 250px)<br>2. 有过渡动画效果 |
| **测试结果** | ✅ 通过                                                |

---

## 测试总结

| 指标         | 结果 |
| ------------ | ---- |
| **总用例数** | 10   |
| **通过**     | 10   |
| **失败**     | 0    |
| **通过率**   | 100% |

---

## 已知问题

无

---

## 待优化项

无
