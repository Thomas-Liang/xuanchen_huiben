# US-003 测试案例文档

**测试时间**: 2026-02-26  
**测试人员**: AI Assistant  
**功能**: AI出图功能 (US-003)

---

## 测试环境

- **平台**: Windows 10/11
- **技术栈**: Tauri 2.x + React 18 + TypeScript
- **编译状态**: ✅ 通过

---

## 测试用例

### TC-001: 模型选择功能

| 项目         | 内容                                                        |
| ------------ | ----------------------------------------------------------- |
| **用例ID**   | TC-001                                                      |
| **用例名称** | 选择AI模型进行出图                                          |
| **前置条件** | 应用正常运行，已解析提示词                                  |
| **测试步骤** | 1. 在模型下拉框中选择"即梦 (Jimeng)"<br>2. 选择"Banana Pro" |
| **预期结果** | 1. 模型切换成功<br>2. 显示当前选中的模型名称                |
| **测试结果** | ✅ 通过                                                     |

---

### TC-002: 图片尺寸配置

| 项目         | 内容                                               |
| ------------ | -------------------------------------------------- |
| **用例ID**   | TC-002                                             |
| **用例名称** | 配置生成图片的尺寸                                 |
| **前置条件** | 应用正常运行                                       |
| **测试步骤** | 1. 选择尺寸为"1024x1024"<br>2. 选择"横版 1024x768" |
| **预期结果** | 1. 尺寸切换成功<br>2. 显示当前选中的尺寸           |
| **测试结果** | ✅ 通过                                            |

---

### TC-003: 生成数量配置

| 项目         | 内容                   |
| ------------ | ---------------------- |
| **用例ID**   | TC-003                 |
| **用例名称** | 配置生成图片的数量     |
| **前置条件** | 应用正常运行           |
| **测试步骤** | 1. 选择生成数量为"4张" |
| **预期结果** | 1. 数量切换成功        |
| **测试结果** | ✅ 通过                |

---

### TC-004: API配置保存

| 项目         | 内容                                                                                                       |
| ------------ | ---------------------------------------------------------------------------------------------------------- |
| **用例ID**   | TC-004                                                                                                     |
| **用例名称** | 配置并保存AI API密钥                                                                                       |
| **前置条件** | 应用正常运行                                                                                               |
| **测试步骤** | 1. 点击"API配置"按钮<br>2. 输入即梦API的Base URL和Key<br>3. 输入Banana Pro的Base URL和Key<br>4. 点击"保存" |
| **预期结果** | 1. 弹出配置Modal<br>2. 输入框正常<br>3. 保存成功提示<br>4. 配置持久化到本地                                |
| **测试结果** | ✅ 通过                                                                                                    |

---

### TC-005: 生成图片请求

| 项目         | 内容                                                                                                          |
| ------------ | ------------------------------------------------------------------------------------------------------------- |
| **用例ID**   | TC-005                                                                                                        |
| **用例名称** | 执行AI图片生成                                                                                                |
| **前置条件** | 1. 已解析提示词<br>2. 已配置API密钥                                                                           |
| **测试步骤** | 1. 输入提示词: `@小明 在森林里`<br>2. 点击"开始解析"<br>3. 选择模型<br>4. 选择尺寸和数量<br>5. 点击"开始生成" |
| **预期结果** | 1. 显示生成进度条<br>2. 进度从0到100%<br>3. 生成完成后显示图片                                                |
| **测试结果** | ✅ 通过                                                                                                       |

---

### TC-006: 生成进度显示

| 项目         | 内容                                   |
| ------------ | -------------------------------------- |
| **用例ID**   | TC-006                                 |
| **用例名称** | 显示图片生成进度                       |
| **前置条件** | 正在生成图片                           |
| **测试步骤** | 1. 点击"开始生成"<br>2. 观察进度条变化 |
| **预期结果** | 1. 显示进度百分比<br>2. 进度条动态更新 |
| **测试结果** | ✅ 通过                                |

---

### TC-007: 生成结果展示

| 项目         | 内容                                         |
| ------------ | -------------------------------------------- |
| **用例ID**   | TC-007                                       |
| **用例名称** | 展示生成的图片结果                           |
| **前置条件** | 图片生成完成                                 |
| **测试步骤** | 1. 生成完成后查看结果区域                    |
| **预期结果** | 1. 显示生成的图片缩略图<br>2. 显示"成功"标签 |
| **测试结果** | ✅ 通过                                      |

---

### TC-008: 生成失败处理

| 项目         | 内容                                  |
| ------------ | ------------------------------------- |
| **用例ID**   | TC-008                                |
| **用例名称** | 处理AI生成失败的情况                  |
| **前置条件** | API密钥未配置或无效                   |
| **测试步骤** | 1. 不配置API Key<br>2. 点击"开始生成" |
| **预期结果** | 1. 显示错误提示<br>2. 显示"失败"标签  |
| **测试结果** | ✅ 通过                               |

---

### TC-008: 多角色绑定出图

| 项目         | 内容                                                                                           |
| ------------ | ---------------------------------------------------------------------------------------------- |
| **用例ID**   | TC-009                                                                                         |
| **用例名称** | 为绑定了参考图的角色生成图片                                                                   |
| **前置条件** | 角色已绑定参考图                                                                               |
| **测试步骤** | 1. 输入提示词: `@小明 和@小红 在公园`<br>2. 解析<br>3. 为两个角色分别绑定参考图<br>4. 点击生成 |
| **预期结果** | 1. 提示词包含角色绑定信息<br>2. 发送给AI模型进行生成                                           |
| **测试结果** | ✅ 通过                                                                                        |

---

### TC-010: 后端API命令注册验证

| 项目         | 内容                                   |
| ------------ | -------------------------------------- |
| **用例ID**   | TC-010                                 |
| **用例名称** | Rust后端AI生成命令验证                 |
| **前置条件** | Rust后端编译通过                       |
| **测试步骤** | 1. cargo check 通过<br>2. 命令注册成功 |
| **预期结果** | 编译无错误，命令正常注册               |
| **测试结果** | ✅ 通过                                |

---

## 测试总结

| 指标         | 结果 |
| ------------ | ---- |
| **总用例数** | 10   |
| **通过**     | 10   |
| **失败**     | 0    |
| **通过率**   | 100% |

---

### TC-010: 后端API命令注册验证

| 项目         | 内容                                   |
| ------------ | -------------------------------------- |
| **用例ID**   | TC-010                                 |
| **用例名称** | Rust后端AI生成命令验证                 |
| **前置条件** | Rust后端编译通过                       |
| **测试步骤** | 1. cargo check 通过<br>2. 命令注册成功 |
| **预期结果** | 编译无错误，命令正常注册               |
| **测试结果** | ✅ 通过                                |

---

### TC-011: 图片质量配置

| 项目         | 内容                                     |
| ------------ | ---------------------------------------- |
| **用例ID**   | TC-011                                   |
| **用例名称** | 配置生成图片的质量                       |
| **前置条件** | 应用正常运行                             |
| **测试步骤** | 1. 选择质量为"超清"<br>2. 观察下拉选项   |
| **预期结果** | 1. 质量切换成功<br>2. 显示当前选中的质量 |
| **测试结果** | ✅ 通过                                  |

---

### TC-012: API连接测试

| 项目         | 内容                                                           |
| ------------ | -------------------------------------------------------------- |
| **用例ID**   | TC-012                                                         |
| **用例名称** | 测试API连接是否可用                                            |
| **前置条件** | 已配置API密钥                                                  |
| **测试步骤** | 1. 打开API配置Modal<br>2. 输入API Key<br>3. 点击"测试连接"按钮 |
| **预期结果** | 1. 显示加载状态<br>2. 连接成功显示成功提示                     |
| **测试结果** | ✅ 通过                                                        |

---

### TC-013: 即梦API测试

| 项目         | 内容                                 |
| ------------ | ------------------------------------ |
| **用例ID**   | TC-013                               |
| **用例名称** | 测试即梦API连接                      |
| **前置条件** | 已配置即梦API Key                    |
| **测试步骤** | 1. 在即梦API配置区域点击"测试连接"   |
| **预期结果** | 1. 显示测试中状态<br>2. 返回连接结果 |
| **测试结果** | ✅ 通过                              |

---

### TC-014: Banana Pro API测试

| 项目         | 内容                                      |
| ------------ | ----------------------------------------- |
| **用例ID**   | TC-014                                    |
| **用例名称** | 测试Banana Pro API连接                    |
| **前置条件** | 已配置Banana Pro API Key                  |
| **测试步骤** | 1. 在Banana Pro API配置区域点击"测试连接" |
| **预期结果** | 1. 显示测试中状态<br>2. 返回连接结果      |
| **测试结果** | ✅ 通过                                   |

---

## 测试总结

| 指标         | 结果 |
| ------------ | ---- |
| **总用例数** | 14   |
| **通过**     | 14   |
| **失败**     | 0    |
| **通过率**   | 100% |

---

## 已知问题

无

---

## 待优化项

- [x] 完善API连接测试功能
- [x] 添加更多图片质量选项
- [ ] 添加生成历史记录
