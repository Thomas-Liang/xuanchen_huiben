# US-007 三方API配置 - 测试案例

**文档版本**: 1.0  
**创建日期**: 2026-02-27  
**时间戳**: 20260227_185016  
**User Story**: US-007  
**最后更新**: 2026-02-27

---

## 1. 测试范围

本文档涵盖 US-007 三方API配置功能的所有测试案例，包括：

- Seedream API配置（Base URL、API Key）
- Banana Pro API配置（Base URL、API Key）
- API配置保存与加载
- API配置加密存储
- API连接测试

---

## 2. 测试环境

| 项目     | 说明                   |
| -------- | ---------------------- |
| 应用类型 | Tauri + React 桌面应用 |
| 测试数据 | 本地文件系统存储       |
| 前端框架 | React 18 + TypeScript  |
| 后端框架 | Rust + Tauri           |

---

## 3. 测试案例

### 3.1 Seedream API配置

#### TC-007-001: 配置Seedream Base URL

| 项目     | 内容                                                                       |
| -------- | -------------------------------------------------------------------------- |
| 测试ID   | TC-007-001                                                                 |
| 测试名称 | 配置Seedream Base URL                                                      |
| 优先级   | P0                                                                         |
| 前置条件 | 应用正常运行                                                               |
| 测试步骤 | 1. 点击「API配置」按钮<br>2. 在Seedream区域输入Base URL<br>3. 点击「保存」 |
| 预期结果 | Base URL成功保存，关闭弹窗后重新打开仍显示已保存的值                       |
| 测试状态 | ⬜                                                                         |

#### TC-007-002: 配置Seedream API Key

| 项目     | 内容                                                                      |
| -------- | ------------------------------------------------------------------------- |
| 测试ID   | TC-007-002                                                                |
| 测试名称 | 配置Seedream API Key                                                      |
| 优先级   | P0                                                                        |
| 前置条件 | 应用正常运行                                                              |
| 测试步骤 | 1. 点击「API配置」按钮<br>2. 在Seedream区域输入API Key<br>3. 点击「保存」 |
| 预期结果 | API Key成功保存，关闭弹窗后重新打开仍显示已保存的值                       |
| 测试状态 | ⬜                                                                        |

#### TC-007-003: 测试Seedream API连接

| 项目     | 内容                                              |
| -------- | ------------------------------------------------- |
| 测试ID   | TC-007-003                                        |
| 测试名称 | 测试Seedream API连接                              |
| 优先级   | P0                                                |
| 前置条件 | 已配置有效的Base URL和API Key                     |
| 测试步骤 | 1. 点击「API配置」按钮<br>2. 点击「测试连接」按钮 |
| 预期结果 | 显示「连接成功」提示                              |
| 测试状态 | ⬜                                                |

### 3.2 Banana Pro API配置

#### TC-007-004: 配置Banana Pro Base URL

| 项目     | 内容                                                                         |
| -------- | ---------------------------------------------------------------------------- |
| 测试ID   | TC-007-004                                                                   |
| 测试名称 | 配置Banana Pro Base URL                                                      |
| 优先级   | P0                                                                           |
| 前置条件 | 应用正常运行                                                                 |
| 测试步骤 | 1. 点击「API配置」按钮<br>2. 在Banana Pro区域输入Base URL<br>3. 点击「保存」 |
| 预期结果 | Base URL成功保存，关闭弹窗后重新打开仍显示已保存的值                         |
| 测试状态 | ⬜                                                                           |

#### TC-007-005: 配置Banana Pro API Key

| 项目     | 内容                                                                        |
| -------- | --------------------------------------------------------------------------- |
| 测试ID   | TC-007-005                                                                  |
| 测试名称 | 配置Banana Pro API Key                                                      |
| 优先级   | P0                                                                          |
| 前置条件 | 应用正常运行                                                                |
| 测试步骤 | 1. 点击「API配置」按钮<br>2. 在Banana Pro区域输入API Key<br>3. 点击「保存」 |
| 预期结果 | API Key成功保存，关闭弹窗后重新打开仍显示已保存的值                         |
| 测试状态 | ⬜                                                                          |

#### TC-007-006: 测试Banana Pro API连接

| 项目     | 内容                                                          |
| -------- | ------------------------------------------------------------- |
| 测试ID   | TC-007-006                                                    |
| 测试名称 | 测试Banana Pro API连接                                        |
| 优先级   | P0                                                            |
| 前置条件 | 已配置有效的Base URL和API Key                                 |
| 测试步骤 | 1. 点击「API配置」按钮<br>2. 点击Banana Pro的「测试连接」按钮 |
| 预期结果 | 显示「连接成功」提示                                          |
| 测试状态 | ⬜                                                            |

### 3.3 加密存储测试

#### TC-007-007: 验证API配置加密存储

| 项目     | 内容                                                             |
| -------- | ---------------------------------------------------------------- |
| 测试ID   | TC-007-007                                                       |
| 测试名称 | 验证API配置加密存储                                              |
| 优先级   | P0                                                               |
| 前置条件 | 已保存API配置                                                    |
| 测试步骤 | 1. 保存API配置<br>2. 打开配置文件所在目录<br>3. 检查配置文件内容 |
| 预期结果 | 配置文件内容为加密数据（非明文JSON）                             |
| 测试状态 | ⬜                                                               |

#### TC-007-008: 验证重启应用后配置仍可用

| 项目     | 内容                                                          |
| -------- | ------------------------------------------------------------- |
| 测试ID   | TC-007-008                                                    |
| 测试名称 | 验证重启应用后API配置仍可用                                   |
| 优先级   | P0                                                            |
| 前置条件 | 已保存API配置                                                 |
| 测试步骤 | 1. 保存API配置<br>2. 关闭并重新启动应用<br>3. 点击「API配置」 |
| 预期结果 | 重新打开后显示之前保存的配置值                                |
| 测试状态 | ⬜                                                            |

#### TC-007-009: 验证密钥文件存在

| 项目     | 内容                                         |
| -------- | -------------------------------------------- |
| 测试ID   | TC-007-009                                   |
| 测试名称 | 验证加密密钥文件存在                         |
| 优先级   | P1                                           |
| 前置条件 | 已保存API配置                                |
| 测试步骤 | 1. 保存API配置<br>2. 检查key.bin文件是否存在 |
| 预期结果 | key.bin文件存在                              |
| 测试状态 | ⬜                                           |

### 3.4 生成功能测试

#### TC-007-010: 使用Seedream模型生成图片

| 项目     | 内容                                                        |
| -------- | ----------------------------------------------------------- |
| 测试ID   | TC-007-010                                                  |
| 测试名称 | 使用Seedream模型生成图片                                    |
| 优先级   | P0                                                          |
| 前置条件 | 已配置有效的Seedream API                                    |
| 测试步骤 | 1. 输入提示词<br>2. 选择Seedream模型<br>3. 点击「开始生成」 |
| 预期结果 | 成功生成图片                                                |
| 测试状态 | ⬜                                                          |

#### TC-007-011: 使用Banana Pro模型生成图片

| 项目     | 内容                                                          |
| -------- | ------------------------------------------------------------- |
| 测试ID   | TC-007-011                                                    |
| 测试名称 | 使用Banana Pro模型生成图片                                    |
| 优先级   | P0                                                            |
| 前置条件 | 已配置有效的Banana Pro API                                    |
| 测试步骤 | 1. 输入提示词<br>2. 选择Banana Pro模型<br>3. 点击「开始生成」 |
| 预期结果 | 成功生成图片                                                  |
| 测试状态 | ⬜                                                            |

---

## 4. 测试结果汇总

| 测试ID     | 测试名称                   | 优先级 | 测试状态 |
| ---------- | -------------------------- | ------ | -------- |
| TC-007-001 | 配置Seedream Base URL      | P0     | ⬜       |
| TC-007-002 | 配置Seedream API Key       | P0     | ⬜       |
| TC-007-003 | 测试Seedream API连接       | P0     | ⬜       |
| TC-007-004 | 配置Banana Pro Base URL    | P0     | ⬜       |
| TC-007-005 | 配置Banana Pro API Key     | P0     | ⬜       |
| TC-007-006 | 测试Banana Pro API连接     | P0     | ⬜       |
| TC-007-007 | 验证API配置加密存储        | P0     | ⬜       |
| TC-007-008 | 验证重启应用后配置仍可用   | P0     | ⬜       |
| TC-007-009 | 验证加密密钥文件存在       | P1     | ⬜       |
| TC-007-010 | 使用Seedream模型生成图片   | P0     | ⬜       |
| TC-007-011 | 使用Banana Pro模型生成图片 | P0     | ⬜       |

---

_文档结束_
