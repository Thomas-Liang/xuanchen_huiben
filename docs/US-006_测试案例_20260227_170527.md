# US-006 参考图管理 - 测试案例

**文档版本**: 1.1  
**创建日期**: 2026-02-27  
**时间戳**: 20260227_170527  
**User Story**: US-006  
**最后更新**: 2026-02-27

---

## 1. 测试范围

本文档涵盖 US-006 参考图管理功能的所有测试案例，包括：

- 参考图列表查看
- 参考图筛选（类型、标签、搜索）
- 参考图删除
- 标签管理（添加、移除）

---

## 2. 测试环境

| 项目     | 说明                   |
| -------- | ---------------------- |
| 应用类型 | Tauri + React 桌面应用 |
| 测试数据 | 本地文件系统存储       |
| 前端框架 | React 18 + TypeScript  |
| 后端框架 | Rust + Tauri           |

---

## 3. 测试案例

### 3.0 绑定流程测试（核心）

#### TC-000: 完整绑定参考图流程

| 项目     | 内容                                                                                                                                                                 |
| -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 测试ID   | TC-000                                                                                                                                                               |
| 测试名称 | 完整绑定参考图流程                                                                                                                                                   |
| 优先级   | P0                                                                                                                                                                   |
| 前置条件 | 无                                                                                                                                                                   |
| 测试步骤 | 1. 输入提示词：`在森林里@小明 正在跑步`<br>2. 点击「开始解析」<br>3. 点击「绑定参考图」按钮<br>4. 上传或从图库选择图片<br>5. 选择类型「人物」<br>6. 点击「确认绑定」 |
| 预期结果 | 1. 解析成功显示角色@小明（未绑定）<br>2. 绑定成功后显示已绑定状态<br>3. 参考图出现在参考图管理中                                                                     |
| 测试状态 | ⬜                                                                                                                                                                   |

#### TC-000b: 从图库选择参考图

| 项目     | 内容                                                                                                                                               |
| -------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| 测试ID   | TC-000b                                                                                                                                            |
| 测试名称 | 从图库选择已保存的参考图                                                                                                                           |
| 优先级   | P0                                                                                                                                                 |
| 前置条件 | 已绑定至少1个参考图                                                                                                                                |
| 测试步骤 | 1. 输入提示词：`@小红 在海边`<br>2. 点击「开始解析」<br>3. 点击「绑定参考图」<br>4. 点击「从图库选择」<br>5. 选择已有参考图<br>6. 点击「确认绑定」 |
| 预期结果 | 参考图自动填入并绑定成功                                                                                                                           |
| 测试状态 | ⬜                                                                                                                                                 |

### 3.1 功能测试案例

#### TC-001: 查看参考图列表

| 项目     | 内容                                                                                                        |
| -------- | ----------------------------------------------------------------------------------------------------------- |
| 测试ID   | TC-001                                                                                                      |
| 测试名称 | 查看参考图列表                                                                                              |
| 优先级   | P0                                                                                                          |
| 前置条件 | 已绑定至少1个角色参考图                                                                                     |
| 测试步骤 | 1. 点击导航栏"参考图管理"按钮<br>2. 等待加载完成                                                            |
| 预期结果 | 1. 弹出参考图管理模态框<br>2. 显示所有已绑定的参考图卡片<br>3. 每个卡片显示：角色名、类型标签、参考图缩略图 |
| 测试状态 | ⬜                                                                                                          |

#### TC-002: 按类型筛选参考图

| 项目     | 内容                                                        |
| -------- | ----------------------------------------------------------- |
| 测试ID   | TC-002                                                      |
| 测试名称 | 按类型筛选参考图                                            |
| 优先级   | P0                                                          |
| 前置条件 | 已绑定多个类型的参考图（人物和场景）                        |
| 测试步骤 | 1. 打开参考图管理<br>2. 点击类型筛选下拉框<br>3. 选择"人物" |
| 预期结果 | 仅显示类型为"人物"的参考图                                  |
| 测试状态 | ⬜                                                          |

#### TC-003: 按类型筛选-场景

| 项目     | 内容                                   |
| -------- | -------------------------------------- |
| 测试ID   | TC-003                                 |
| 测试名称 | 按类型筛选参考图-场景                  |
| 优先级   | P0                                     |
| 前置条件 | 已绑定多个类型的参考图                 |
| 测试步骤 | 1. 打开参考图管理<br>2. 选择"场景"类型 |
| 预期结果 | 仅显示类型为"场景"的参考图             |
| 测试状态 | ⬜                                     |

#### TC-004: 搜索参考图-按角色名

| 项目     | 内容                                                                |
| -------- | ------------------------------------------------------------------- |
| 测试ID   | TC-004                                                              |
| 测试名称 | 搜索参考图-按角色名                                                 |
| 优先级   | P0                                                                  |
| 前置条件 | 已绑定多个角色参考图                                                |
| 测试步骤 | 1. 打开参考图管理<br>2. 在搜索框输入角色名<br>3. 按回车键或点击搜索 |
| 预期结果 | 显示匹配角色名的参考图                                              |
| 测试状态 | ⬜                                                                  |

#### TC-005: 搜索参考图-按标签

| 项目     | 内容                                                      |
| -------- | --------------------------------------------------------- |
| 测试ID   | TC-005                                                    |
| 测试名称 | 搜索参考图-按标签                                         |
| 优先级   | P0                                                        |
| 前置条件 | 已为参考图添加至少1个标签                                 |
| 测试步骤 | 1. 打开参考图管理<br>2. 在搜索框输入标签名<br>3. 执行搜索 |
| 预期结果 | 显示包含该标签的参考图                                    |
| 测试状态 | ⬜                                                        |

#### TC-006: 删除参考图

| 项目     | 内容                                                                                   |
| -------- | -------------------------------------------------------------------------------------- |
| 测试ID   | TC-006                                                                                 |
| 测试名称 | 删除参考图                                                                             |
| 优先级   | P0                                                                                     |
| 前置条件 | 已绑定至少1个角色参考图                                                                |
| 测试步骤 | 1. 打开参考图管理<br>2. 找到目标参考图<br>3. 点击删除图标<br>4. 在确认弹窗中点击"确定" |
| 预期结果 | 1. 参考图从列表中移除<br>2. 相关图片文件被删除<br>3. 显示成功提示                      |
| 测试状态 | ⬜                                                                                     |

#### TC-007: 取消删除参考图

| 项目     | 内容                                                              |
| -------- | ----------------------------------------------------------------- |
| 测试ID   | TC-007                                                            |
| 测试名称 | 取消删除参考图                                                    |
| 优先级   | P1                                                                |
| 前置条件 | 已绑定至少1个角色参考图                                           |
| 测试步骤 | 1. 打开参考图管理<br>2. 点击删除图标<br>3. 在确认弹窗中点击"取消" |
| 预期结果 | 参考图未被删除，列表保持不变                                      |
| 测试状态 | ⬜                                                                |

#### TC-008: 添加标签

| 项目     | 内容                                                                                            |
| -------- | ----------------------------------------------------------------------------------------------- |
| 测试ID   | TC-008                                                                                          |
| 测试名称 | 添加标签到参考图                                                                                |
| 优先级   | P0                                                                                              |
| 前置条件 | 已绑定至少1个角色参考图                                                                         |
| 测试步骤 | 1. 打开参考图管理<br>2. 找到目标参考图<br>3. 点击"添加标签"<br>4. 输入新标签名<br>5. 按回车确认 |
| 预期结果 | 1. 标签显示在参考图卡片上<br>2. 标签加入可选标签列表                                            |
| 测试状态 | ⬜                                                                                              |

#### TC-009: 移除标签

| 项目     | 内容                                                                  |
| -------- | --------------------------------------------------------------------- |
| 测试ID   | TC-009                                                                |
| 测试名称 | 移除参考图标签                                                        |
| 优先级   | P0                                                                    |
| 前置条件 | 已为参考图添加至少1个标签                                             |
| 测试步骤 | 1. 打开参考图管理<br>2. 找到有标签的参考图<br>3. 点击标签上的关闭按钮 |
| 预期结果 | 标签从参考图卡片上移除                                                |
| 测试状态 | ⬜                                                                    |

#### TC-010: 按标签筛选

| 项目     | 内容                                                            |
| -------- | --------------------------------------------------------------- |
| 测试ID   | TC-010                                                          |
| 测试名称 | 按标签筛选参考图                                                |
| 优先级   | P0                                                              |
| 前置条件 | 已为多个参考图添加不同标签                                      |
| 测试步骤 | 1. 打开参考图管理<br>2. 在标签筛选下拉框中选择标签<br>3. 可多选 |
| 预期结果 | 仅显示包含所选标签的参考图                                      |
| 测试状态 | ⬜                                                              |

#### TC-011: 组合筛选

| 项目     | 内容                                                    |
| -------- | ------------------------------------------------------- |
| 测试ID   | TC-011                                                  |
| 测试名称 | 组合条件筛选                                            |
| 优先级   | P1                                                      |
| 前置条件 | 已绑定多个参考图并添加标签                              |
| 测试步骤 | 1. 选择类型筛选<br>2. 输入搜索关键词<br>3. 选择标签筛选 |
| 预期结果 | 同时满足所有筛选条件的参考图                            |
| 测试状态 | ⬜                                                      |

#### TC-012: 清空筛选条件

| 项目     | 内容                                         |
| -------- | -------------------------------------------- |
| 测试ID   | TC-012                                       |
| 测试名称 | 清空筛选条件                                 |
| 优先级   | P1                                           |
| 前置条件 | 已设置筛选条件                               |
| 测试步骤 | 1. 设置筛选条件<br>2. 点击清除按钮或设置为空 |
| 预期结果 | 显示所有参考图                               |
| 测试状态 | ⬜                                           |

#### TC-013: 空状态显示

| 项目     | 内容                                         |
| -------- | -------------------------------------------- |
| 测试ID   | TC-013                                       |
| 测试名称 | 无参考图时显示空状态                         |
| 优先级   | P2                                           |
| 前置条件 | 无任何绑定参考图                             |
| 测试步骤 | 1. 没有任何绑定参考图<br>2. 点击"参考图管理" |
| 预期结果 | 显示"暂无参考图"的空状态提示                 |
| 测试状态 | ⬜                                           |

#### TC-014: 关闭模态框

| 项目     | 内容                                                 |
| -------- | ---------------------------------------------------- |
| 测试ID   | TC-014                                               |
| 测试名称 | 关闭参考图管理模态框                                 |
| 优先级   | P2                                                   |
| 前置条件 | 模态框已打开                                         |
| 测试步骤 | 1. 打开参考图管理<br>2. 点击右上角X或点击遮罩或按ESC |
| 预期结果 | 模态框关闭                                           |
| 测试状态 | ⬜                                                   |

---

## 4. 测试用例汇总

| 优先级        | 数量   |
| ------------- | ------ |
| P0 (必须测试) | 10     |
| P1 (建议测试) | 4      |
| P2 (可选测试) | 2      |
| **合计**      | **16** |

---

## 5. 验收标准对照

| 验收标准                   | 对应测试案例           |
| -------------------------- | ---------------------- |
| 支持查看已上传的参考图列表 | TC-001                 |
| 支持删除不需要的参考图     | TC-006, TC-007         |
| 参考图支持分类/标签管理    | TC-008, TC-009, TC-010 |
| 支持搜索参考图             | TC-004, TC-005         |
| 绑定参考图流程             | TC-000, TC-000b        |

---

## 6. 备注

1. 测试过程中需注意验证数据持久化（刷新页面后数据是否保留）
2. 删除操作需确认原文件是否真正删除
3. 标签搜索支持模糊匹配
4. 多条件筛选需验证AND逻辑
5. 绑定流程是最核心的功能，必须优先测试
